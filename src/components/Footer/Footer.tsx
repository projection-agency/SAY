import s from './Footer.module.css';
import { Link } from 'react-router-dom';
import { toast } from 'react-toastify';

import { apiUrlWp, consumerKey, consumerSecret } from "../../App";


const Footer = () => {


    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
        e.preventDefault();

        const form = e.currentTarget;
        const emailInput = form.querySelector('input[type="email"]') as HTMLInputElement;
        const email = emailInput.value.trim();

        if (!email) {
            toast.warn('–í–≤–µ–¥—ñ—Ç—å email!');
            return;
        }

        const formData = new FormData();
        formData.append('email', email);

        const credentials = btoa(`${consumerKey}:${consumerSecret}`);
        const url = `${apiUrlWp}wp-json/responses/v1/save-email`;

        console.log("üîç –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –∑–∞–ø–∏—Ç –Ω–∞:", url);
        console.log("üì¶ FormData payload:", email);

        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    Authorization: `Basic ${credentials}`,
                },
                body: formData,
            });

            const data = await response.json();

            if (response.ok) {
                toast.success(`Email –∑–±–µ—Ä–µ–∂–µ–Ω–æ: ${data.email}`);
                emailInput.value = '';
            } else {
                toast.error(data.error || '–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ');
            }
        } catch (error) {
            console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ:', error);
            toast.error('–ü–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.');
        }
    };


    return (
        <footer id="contacts" className={s.footer}>
            <div className={s.top}>
                <div className={s.col}>
                    <Link to="/" className={s.logo}>
                        <svg className={s.logoSvg} width="142" height="48" viewBox="0 0 142 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M45.2058 0V14.579H44.0774C43.7116 11.782 43.0559 9.55464 42.1087 7.89511C41.1632 6.23733 39.8156 4.92236 38.066 3.94668C36.3165 2.97275 34.5065 2.48579 32.6362 2.48579C30.5208 2.48579 28.7712 3.14328 27.3892 4.46001C26.0054 5.77674 25.3152 7.27278 25.3152 8.95166C25.3152 10.2367 25.7517 11.4076 26.6265 12.4641C27.8878 14.0182 30.8866 16.0908 35.6263 18.6803C39.4912 20.7934 42.1294 22.4161 43.5442 23.5447C44.9573 24.6751 46.0461 26.0059 46.8087 27.5388C47.5714 29.0735 47.9527 30.6786 47.9527 32.3575C47.9527 35.5482 46.7363 38.2994 44.3069 40.6112C41.8758 42.9229 38.7493 44.0779 34.9258 44.0779C33.7249 44.0779 32.5965 43.9848 31.5388 43.7984C30.9073 43.6947 29.6012 43.3167 27.6186 42.6645C25.6361 42.0123 24.38 41.6853 23.8503 41.6853C23.3206 41.6853 22.9393 41.84 22.646 42.1512C22.351 42.4624 22.1318 43.104 21.9903 44.0779H20.8619V29.6238H21.9903C22.5183 32.6493 23.2309 34.9136 24.1264 36.4149C25.0219 37.918 26.3884 39.1661 28.2294 40.1612C30.0705 41.1562 32.0892 41.6537 34.2857 41.6537C36.8272 41.6537 38.8356 40.9698 40.3108 39.6021C41.786 38.2344 42.5228 36.6188 42.5228 34.7536C42.5228 33.7181 42.2433 32.6704 41.6842 31.6138C41.1252 30.5573 40.2556 29.5728 39.0754 28.6604C38.2817 28.0381 36.1163 26.7178 32.5775 24.6962C29.0387 22.6762 26.5213 21.0642 25.0271 19.8635C23.5329 18.661 22.3975 17.3355 21.6263 15.8851C20.8533 14.4348 20.4668 12.8386 20.4668 11.0982C20.4668 8.07266 21.6056 5.46733 23.8831 3.2804C26.1607 1.09522 29.0594 0.0017597 32.5775 0.0017597C34.7739 0.0017597 37.1033 0.552008 39.5637 1.64899C40.7025 2.1676 41.5065 2.42602 41.9741 2.42602C42.5021 2.42602 42.9352 2.26604 43.2716 1.94433C43.6064 1.62262 43.8772 0.975683 44.0808 0.0017597H45.2093L45.2058 0Z" fill="#FFFEFC"/>
                            <path d="M114.276 0.963674H129.037V2.13977H128.226C127.684 2.13977 126.894 2.38413 125.854 2.87109C124.813 3.35805 123.866 4.05773 123.014 4.97012C122.161 5.88252 121.11 7.36626 119.861 9.42134L109.657 25.7952V36.6051C109.657 39.2543 109.949 40.9086 110.53 41.5643C111.32 42.4539 112.57 42.9004 114.274 42.9004H115.648V44.0765H97.6724V42.9004H99.1701C100.959 42.9004 102.228 42.3501 102.978 41.2479C103.435 40.5693 103.665 39.0223 103.665 36.6051V26.3982L92.0562 8.33842C90.6828 6.21829 89.7511 4.89453 89.2628 4.36361C88.7745 3.83446 87.7599 3.19807 86.2209 2.4562C85.805 2.24524 85.2011 2.13801 84.4109 2.13801V0.961914H102.511V2.13801H101.574C100.595 2.13801 99.6964 2.37182 98.8751 2.83769C98.0538 3.30355 97.6431 4.00323 97.6431 4.93672C97.6431 5.69968 98.2781 7.07795 99.5462 9.06974L108.377 22.9648L116.678 9.67448C117.925 7.68269 118.55 6.19895 118.55 5.22327C118.55 4.63083 118.398 4.09992 118.098 3.63405C117.796 3.16819 117.365 2.80253 116.802 2.53707C116.24 2.27162 115.398 2.13977 114.274 2.13977V0.963674H114.276Z" fill="#FFFEFC"/>
                            <path d="M93.4226 46.743C93.0448 46.743 92.6652 46.7255 92.2908 46.6727C90.9225 46.4793 89.832 45.9889 89.0159 45.1995C88.0704 44.2836 87.0179 42.2901 85.8584 39.2154L71.4581 0.963379H70.3901L55.8379 38.8075C54.5766 42.1319 53.4275 44.3346 52.3905 45.421C52.1041 45.7269 51.6262 45.9994 50.9533 46.2403C49.9853 46.5866 48.9604 46.7431 47.9338 46.7466L0 46.8485L12.2246 47.9983H62.0615V46.743C60.0686 46.5848 58.7711 46.2403 58.1707 45.7094C57.5702 45.1784 57.27 44.5614 57.27 43.8617C57.27 42.9792 57.6151 41.6466 58.307 39.8605L61.1142 32.6036H77.1313L79.6331 39.2171C80.4458 41.3654 80.853 42.9353 80.853 43.9303C80.853 44.6757 80.5631 45.3103 79.9834 45.8289C79.4036 46.3493 78.2907 46.6552 76.643 46.7448V48H129.775L142 46.8503L93.4209 46.7466L93.4226 46.743ZM62.0632 30.0932L69.2634 11.5095L76.2806 30.0932H62.0632Z" fill="#FFFEFC"/>
                        </svg>
                    </Link>
                    <a href="mailto:saylingerie11@gmail.com" className={s.contactEmail}>
                        saylingerie11@gmail.com
                    </a>
                    <a href="tel:+380961212525" className={s.contactPhone}>
                        +38 (096) 121 25 25
                    </a>
                    <p className={s.schedule}>–†–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏<br />–ø–Ω-–Ω–¥: 10:00‚Äì19:00</p>
                </div>

                <div className={s.col}>
                    <p className={s.title}>–°–û–¶–Ü–ê–õ–¨–ù–Ü –ú–ï–†–ï–ñ–Ü</p>
                    <ul className={s.socialList}>
                        <li>
                            <a href="viber://chat?number=%2B380961212525" target="_blank">
                            <svg className={s.iconSocial} width="21" height="22" viewBox="0 0 21 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.8655 0H8.4673C4.23406 0 0.770508 3.46356 0.770508 7.69679V10.9954C0.770508 13.9642 2.50229 16.6855 5.16868 17.95V21.6335C5.16868 21.9633 5.581 22.1283 5.80091 21.8809L8.98958 18.6922H12.8655C17.0987 18.6922 20.5623 15.2287 20.5623 10.9954V7.69679C20.5623 3.46356 17.0987 0 12.8655 0ZM15.7518 14.4315L14.6247 15.531C13.4427 16.6855 10.3915 15.3661 7.69762 12.6172C5.00374 9.86839 3.82174 6.78967 4.94877 5.63515L6.04831 4.53561C6.46064 4.12328 7.14785 4.15077 7.61516 4.5631L9.20949 6.21241C9.78675 6.78967 9.53935 7.77926 8.79716 7.99917C8.27488 8.1641 7.91753 8.74136 8.08246 9.26364C8.35735 10.4731 9.89671 12.0125 11.0512 12.3149C11.5735 12.4248 12.1508 12.1499 12.3432 11.6277C12.5906 10.8855 13.5802 10.6656 14.1299 11.2428L15.7243 12.8921C16.1641 13.277 16.1641 13.9642 15.7518 14.4315ZM11.656 5.22282C11.546 5.22282 11.4361 5.22282 11.3261 5.25031C11.1337 5.2778 10.9413 5.11287 10.9138 4.92045C10.8863 4.72803 11.0512 4.53561 11.2436 4.50812C11.3811 4.48063 11.5185 4.48063 11.656 4.48063C13.6626 4.48063 15.3119 6.12995 15.3119 8.13661C15.3119 8.27405 15.312 8.4115 15.2845 8.54894C15.257 8.74136 15.0646 8.90629 14.8721 8.8788C14.6797 8.85131 14.5148 8.65889 14.5423 8.46647C14.5423 8.35652 14.5698 8.24656 14.5698 8.13661C14.5972 6.54227 13.2778 5.22282 11.656 5.22282ZM13.8551 8.1641C13.8551 8.35652 13.6901 8.52145 13.4977 8.52145C13.3053 8.52145 13.1404 8.35652 13.1404 8.1641C13.1404 7.36693 12.4806 6.70721 11.6835 6.70721C11.491 6.70721 11.3261 6.54227 11.3261 6.34985C11.3261 6.15743 11.491 5.9925 11.6835 5.9925C12.8655 5.96501 13.8551 6.9546 13.8551 8.1641ZM16.6589 9.34611C16.6039 9.53853 16.4115 9.67597 16.1916 9.62099C15.9992 9.56601 15.8892 9.3736 15.9442 9.18118C16.0267 8.85131 16.0541 8.52145 16.0541 8.1641C16.0541 5.74511 14.075 3.76593 11.656 3.76593C11.546 3.76593 11.4361 3.76593 11.3261 3.76593C11.1337 3.76593 10.9413 3.62849 10.9413 3.43607C10.9413 3.24365 11.0787 3.05123 11.2711 3.05123C11.4086 3.05123 11.546 3.02374 11.656 3.02374C14.4873 3.02374 16.7963 5.33278 16.7963 8.1641C16.7963 8.54894 16.7414 8.96127 16.6589 9.34611Z" fill="#FFFEFC" fillOpacity="0.8"/>
                            </svg>
                            VIBER
                            </a>
                        </li>
                        <li>
                            <a href="https://t.me/SAY_manager" target="_blank">
                                <svg className={s.iconSocial} xmlns="http://www.w3.org/2000/svg" width="23" height="22" viewBox="0 0 23 22" fill="none">
                                    <path d="M9.29892 13.8723L8.935 18.9145C9.45567 18.9145 9.68117 18.6942 9.95158 18.4296L12.3927 16.1315L17.4508 19.7805C18.3785 20.2898 19.0321 20.0216 19.2823 18.9398L22.6025 3.61442L22.6034 3.61352C22.8977 2.26266 22.1075 1.73441 21.2037 2.06581L1.68783 9.42601C0.355917 9.93529 0.376084 10.6667 1.46142 10.9981L6.45083 12.5268L18.0402 5.38336C18.5857 5.02759 19.0816 5.22444 18.6737 5.58021L9.29892 13.8723Z" fill="#FFFEFC" fillOpacity="0.8"/>
                                </svg>
                                TELEGRAM
                            </a>
                        </li>
                        <li><a href="https://wa.me/380961212525" target="_blank">
                                <svg className={s.iconSocial} xmlns="http://www.w3.org/2000/svg" width="23" height="22" viewBox="0 0 23 22" fill="none">
                                    <g clipPath="url(#clip0_4032_44)">
                                        <path d="M11.6693 0H11.6638C5.59863 0 0.666504 4.9335 0.666504 11C0.666504 13.4062 1.442 15.6365 2.76063 17.4474L1.38975 21.5339L5.61788 20.1823C7.35725 21.3345 9.43213 22 11.6693 22C17.7344 22 22.6665 17.0651 22.6665 11C22.6665 4.93488 17.7344 0 11.6693 0ZM18.0699 15.5334C17.8045 16.2827 16.7513 16.9042 15.9111 17.0857C15.3364 17.2081 14.5856 17.3057 12.0584 16.258C8.82575 14.9188 6.744 11.6339 6.58175 11.4207C6.42638 11.2076 5.2755 9.68138 5.2755 8.10287C5.2755 6.52437 6.07713 5.75575 6.40025 5.42575C6.66563 5.15488 7.10425 5.03113 7.525 5.03113C7.66113 5.03113 7.7835 5.038 7.8935 5.0435C8.21663 5.05725 8.37888 5.0765 8.592 5.58663C8.85738 6.226 9.50363 7.8045 9.58063 7.96675C9.659 8.129 9.73738 8.349 9.62738 8.56213C9.52425 8.78213 9.4335 8.87975 9.27125 9.06675C9.109 9.25375 8.955 9.39675 8.79275 9.5975C8.64425 9.77213 8.4765 9.95913 8.6635 10.2823C8.8505 10.5985 9.49675 11.6531 10.4483 12.5001C11.6761 13.5932 12.6716 13.9425 13.0278 14.091C13.2931 14.201 13.6094 14.1749 13.8033 13.9686C14.0494 13.7033 14.3533 13.2633 14.6626 12.8301C14.8826 12.5194 15.1604 12.4809 15.4519 12.5909C15.7489 12.694 17.3205 13.4709 17.6436 13.6317C17.9668 13.794 18.1799 13.871 18.2583 14.0071C18.3353 14.1433 18.3353 14.7826 18.0699 15.5334Z" fill="#FFFEFC" fillOpacity="0.8"/>
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_4032_44">
                                            <rect width="22" height="22" fill="white" transform="translate(0.666504)"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                                WHATSAPP
                            </a>
                        </li>
                        <li>
                            <a href="https://www.instagram.com/say___ua/" target="_blank">
                            <svg className={s.iconSocial} xmlns="http://www.w3.org/2000/svg" width="23" height="22" viewBox="0 0 23 22" fill="none">
                                <path d="M17.1665 0H6.1665C3.14177 0 0.666504 2.47419 0.666504 5.5V16.5C0.666504 19.5247 3.14177 22 6.1665 22H17.1665C20.1912 22 22.6665 19.5247 22.6665 16.5V5.5C22.6665 2.47419 20.1912 0 17.1665 0ZM11.6665 15.5832C9.13484 15.5832 7.08308 13.5305 7.08308 11C7.08308 8.46834 9.13484 6.41658 11.6665 6.41658C14.197 6.41658 16.2499 8.46834 16.2499 11C16.2499 13.5305 14.197 15.5832 11.6665 15.5832ZM17.6249 6.41658C16.8648 6.41658 16.2499 5.80083 16.2499 5.04158C16.2499 4.28232 16.8648 3.66658 17.6249 3.66658C18.385 3.66658 18.9999 4.28232 18.9999 5.04158C18.9999 5.80083 18.385 6.41658 17.6249 6.41658Z" fill="#FFFEFC" fillOpacity="0.8"/>
                            </svg>
                            INSTAGRAM
                            </a>
                        </li>
                    </ul>
                </div>

                <div className={s.col}>
                    <p className={s.title}>–°–ü–û–ñ–ò–í–ê–ß–ê–ú</p>
                    <ul className={s.links}>
                        <li><a href="/#about">–ü—Ä–æ –Ω–∞—Å</a></li>
                        <li><Link to="/how-to-buy">–î–æ—Å—Ç–∞–≤–∫–∞ —ñ –æ–ø–ª–∞—Ç–∞</Link></li>
                        <li><Link to="/faqs">–ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è</Link></li>
                        <li><a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
                    </ul>
                </div>

                <div className={s.col}>
                    <h3 className={s.subscribeTitle}>
                        –ü–Ü–î–ü–ò–°–ê–¢–ò–°–Ø <br />
                        <em>–ù–ê –†–û–ó–°–ò–õ–ö–£</em>
                    </h3>
                    <form className={s.subscribeForm} onSubmit={handleSubmit}>
                        <input type="email" className={s.inputFooter} placeholder="–í–≤–µ–¥—ñ—Ç—å –í–∞—à e-mail" />
                        <button type="submit">
                            <svg className={s.submitIcon} xmlns="http://www.w3.org/2000/svg" width="30" height="25" viewBox="0 0 30 25" fill="none">
                                <path d="M18.0324 0.682129L16.0887 2.6016L24.738 11.1429L0.000488281 11.1429L0.000488281 13.8574L24.738 13.8574L16.0887 22.3986L18.0324 24.3181L30 12.5001L18.0324 0.682129Z" fill="#FFFEFC" fillOpacity="0.5"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>

            <div className={s.middle}>
                <Link to="/privacy-policy" className={s.privacy}>–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</Link>
                <div className={s.payment}>
                    <img src="/icons/privat24.svg" alt="Privat24" />
                    <img src="/icons/applepay.svg" alt="Apple Pay" />
                    <img src="/icons/googlepay.svg" alt="Google Pay" />
                    <img src="/icons/mastercard.svg" alt="Mastercard" />
                    <img src="/icons/visa.svg" alt="Visa" />
                </div>
            </div>

            <div className={s.bottom}>
                <p>¬©2025 SAY. All Rights Reserved.</p>
                <p>–°–∞–π—Ç —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ–º: <a href="https://beforeafter.agency" target="_blank">Before/After</a></p>
                <div className={s.payment}>
                    <img src="/icons/privat24.svg" alt="Privat24" />
                    <img src="/icons/applepay.svg" alt="Apple Pay" />
                    <img src="/icons/googlepay.svg" alt="Google Pay" />
                    <img src="/icons/mastercard.svg" alt="Mastercard" />
                    <img src="/icons/visa.svg" alt="Visa" />
                </div>
            </div>
        </footer>
    );
};

export default Footer;
